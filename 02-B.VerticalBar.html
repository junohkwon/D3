<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Horizontal Bars</title>
</head>
<body>
  <svg height="1000" width="1000">
  </svg>
  <script src="./lib/d3.v5.min.js"></script>
  <script>

    let students = [
      {"name": "Jane", "value": 80},
      {"name": "John", "value": 90},
      {"name": "Bob", "value": 60}
    ];

    // TODO
    // Vertical Bar 실습
    let svg = d3.select('svg')

    let maxHeight = 200;
    let maxScore = 100;
    let maxWidth = 30;

    svg.selectAll('rect') //svg 내부에 rect 3개를 추가한다.
        .data(students)   //update selection
        .enter()    //update selection --> enter selection
        .append('rect')
          .attr('width', function(d,i,nodes){
              return maxWidth;
           })
          .attr('height',function(d,i,nodes){
              return (d.value / maxScore) * maxHeight;   //높이를 비율로 계산함.
           })
          .attr('x',function(d,i,nodes){
              return i* (maxWidth+ 30);
           })
          .attr('y',function(d,i,nodes){
              return maxHeight - d3.select(this).attr('height'); //시작점을 다시 계산
              //iter중인 자기자신 객체를 가져오는 법
           });

  </script>
</body>
</html>